From 7493a2fefb1d8e1199c828acd2d26119886b1636 Mon Sep 17 00:00:00 2001
From: Enrico Berti <hello@enricoberti.com>
Date: Tue, 25 Nov 2014 01:01:05 +0100
Subject: [PATCH 0319/1173] [oozie] Edit in place does not open a popup now

---
 .../oozie/templates/editor/workflow_editor.mako    |   27 +++++++++++---------
 apps/oozie/static/css/workflow-editor.css          |    7 ++++-
 2 files changed, 21 insertions(+), 13 deletions(-)

diff --git a/apps/oozie/src/oozie/templates/editor/workflow_editor.mako b/apps/oozie/src/oozie/templates/editor/workflow_editor.mako
index a22ebf6..05919bc 100644
--- a/apps/oozie/src/oozie/templates/editor/workflow_editor.mako
+++ b/apps/oozie/src/oozie/templates/editor/workflow_editor.mako
@@ -1669,26 +1669,29 @@ ${ dashboard.import_bindings() }
   var lastSeenPosition = null;
   var lastExpandedWidget = null;
   function toggleProperties(widget) {
-    if (widget.oozieMovable()){
+    if (widget.oozieMovable()) {
       var _el = $("#wdg_" + widget.id());
-      if (! widget.oozieExpanded()){
+      if (!widget.oozieExpanded()) {
         lastExpandedWidget = widget;
-        _el.css("z-index", "99999");
+        _el.css("z-index", "1032");
         lastSeenPosition = _el.position();
-        _el.css("position", "fixed");
+        var _width = _el.width();
+
+        _el.css("position", "absolute");
         _el.css({
-          "top": lastSeenPosition.top + "px",
+          "top": (lastSeenPosition.top) + "px",
           "left": lastSeenPosition.left + "px",
-          "width": "97%",
-          "margin-top": "1%",
-          "margin-left": "1.5%",
-          "height": "93%"
+          "width": _width
         });
         _el.animate({
-          "top": "10px",
-          "left": "0"
-        }, 200);
+          "width": 600
+        }, 200, function () {
+          if ($(document).width() > $(window).width()) {
+            $(document).scrollLeft($(document).width() - $(window).width());
+          }
+        });
         _el.find(".prop-editor").show();
+
         $("#exposeOverlay").fadeIn(300);
         widget.oozieExpanded(!widget.oozieExpanded());
       }
diff --git a/apps/oozie/static/css/workflow-editor.css b/apps/oozie/static/css/workflow-editor.css
index 148b273..1eeb760 100644
--- a/apps/oozie/static/css/workflow-editor.css
+++ b/apps/oozie/static/css/workflow-editor.css
@@ -351,6 +351,11 @@ em {
   display: none;
 }
 
+.prop-editor .tab-pane {
+  overflow-y: auto;
+  max-height: 350px;
+}
+
 .card-widget {
   position:relative;
 }
@@ -364,5 +369,5 @@ em {
   position:fixed;
   top:0;
   left:0;
-  z-index:99998;
+  z-index:1031;
 }
\ No newline at end of file
-- 
1.7.9.5

