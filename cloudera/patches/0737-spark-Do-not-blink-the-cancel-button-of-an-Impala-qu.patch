From ebcfdc0cfa4b172e63adafea7515fd267aa31667 Mon Sep 17 00:00:00 2001
From: Romain Rigaux <romain@cloudera.com>
Date: Mon, 2 Feb 2015 17:29:46 -0500
Subject: [PATCH 0737/1173] [spark] Do not blink the cancel button of an
 Impala query when closing it

---
 apps/spark/static/js/spark.ko.js |    4 ++--
 1 file changed, 2 insertions(+), 2 deletions(-)

diff --git a/apps/spark/static/js/spark.ko.js b/apps/spark/static/js/spark.ko.js
index e1180d9..0556017 100644
--- a/apps/spark/static/js/spark.ko.js
+++ b/apps/spark/static/js/spark.ko.js
@@ -109,7 +109,7 @@ var Snippet = function (vm, notebook, snippet) {
   self.editorMode = ko.observable(TYPE_EDITOR_MAP[self.type()]);
   self.statement_raw = ko.observable(typeof snippet.statement_raw != "undefined" && snippet.statement_raw != null ? snippet.statement_raw : vm.snippetPlaceholders[self.type()]);
   self.codemirrorSize = ko.observable(typeof snippet.codemirrorSize != "undefined" && snippet.codemirrorSize != null ? snippet.codemirrorSize : 100);
-  //self.statement_raw.extend({ rateLimit: 150 });
+  // self.statement_raw.extend({ rateLimit: 150 }); // Should prevent lag from typing but currently send the old query when using the key shortcut
   self.status = ko.observable(typeof snippet.status != "undefined" && snippet.status != null ? snippet.status : 'loading');
   self.settings = ko.mapping.fromJS(typeof snippet.settings != "undefined" && snippet.settings != null ? snippet.settings : {});
   self.variables = ko.observableArray([]);
@@ -451,7 +451,7 @@ var Snippet = function (vm, notebook, snippet) {
         snippet: ko.mapping.toJSON(self)
  	  }, function (data) {
  	    if (data.status == 0) {
- 	      self.status('closed'); 
+ 	      // self.status('closed'); // Keep as 'running' as currently it happens before running a new query
  	    } else {
  	      self._ajax_error(data);
  	    }
-- 
1.7.9.5

