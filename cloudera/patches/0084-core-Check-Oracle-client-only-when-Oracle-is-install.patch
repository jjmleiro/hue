From 560f387ed199036bdc13769672448482cb3b6996 Mon Sep 17 00:00:00 2001
From: Romain Rigaux <romain@cloudera.com>
Date: Wed, 29 Oct 2014 18:41:34 +0100
Subject: [PATCH 0084/1173] [core] Check Oracle client only when Oracle is
 installed

---
 desktop/core/src/desktop/tests.py |    3 +++
 1 file changed, 3 insertions(+)

diff --git a/desktop/core/src/desktop/tests.py b/desktop/core/src/desktop/tests.py
index baf02dc..4b0d8ef 100644
--- a/desktop/core/src/desktop/tests.py
+++ b/desktop/core/src/desktop/tests.py
@@ -633,6 +633,9 @@ def test_cx_Oracle():
   """
   Tests that cx_Oracle (external dependency) is built correctly.
   """
+  if 'ORACLE_HOME' not in os.environ and 'ORACLE_INSTANTCLIENT_HOME' not in os.environ:
+    raise SkipTest
+
   try:
     import cx_Oracle
     return
-- 
1.7.9.5

