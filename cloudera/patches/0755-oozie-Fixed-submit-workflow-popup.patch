From 4269c29431deea3e90bc8c25d65dabb401cc4a2e Mon Sep 17 00:00:00 2001
From: Enrico Berti <hello@enricoberti.com>
Date: Thu, 5 Feb 2015 14:43:46 +0100
Subject: [PATCH 0755/1173] [oozie] Fixed submit workflow popup

---
 .../oozie/templates/editor/submit_job_popup2.mako  |   48 ++++++++++++++++++--
 1 file changed, 43 insertions(+), 5 deletions(-)

diff --git a/apps/oozie/src/oozie/templates/editor/submit_job_popup2.mako b/apps/oozie/src/oozie/templates/editor/submit_job_popup2.mako
index 56de567..03ab00a 100644
--- a/apps/oozie/src/oozie/templates/editor/submit_job_popup2.mako
+++ b/apps/oozie/src/oozie/templates/editor/submit_job_popup2.mako
@@ -20,8 +20,9 @@
 
 <%namespace name="utils" file="../utils.inc.mako" />
 
+<link rel="stylesheet" href="/oozie/static/css/common-editor.css">
 
-<form action="${ action }" method="POST" class="form-horizontal submit-form">
+<form action="${ action }" method="POST" class="form submit-form">
   ${ csrf_token(request) | n,unicode }
   <div class="modal-header">
     <a href="#" class="close" data-dismiss="modal">&times;</a>
@@ -47,12 +48,11 @@
             <div class="controls">
               ${ utils.render_field(form['value'], show_label=False, extra_attrs={'class': 'filechooser-input input-xlarge'}) }
               <div class="btn-group">
-              <button type="button" class="btn btn-default dropdown-toggle" data-toggle="dropdown"
-                        aria-expanded="false">
+                <a class="btn btn-default dropdown-toggle" data-toggle="dropdown">
                   <i class="fa fa-calendar"></i>
                   <span class="caret"></span>
-                </button>
-                <ul class="dropdown-menu" role="menu">
+                </a>
+                <ul class="dropdown-menu pull-right" role="menu">
                   <li>
                     <a class="pointer now-link">
                       ${ _('Now') }
@@ -76,6 +76,44 @@
   </div>
 </form>
 
+<div id="chooseFile" class="modal hide fade">
+  <div class="modal-header">
+      <a href="#" class="close" data-dismiss="modal">&times;</a>
+      <h3>${_('Choose a file')}</h3>
+  </div>
+  <div class="modal-body">
+      <div id="filechooser">
+      </div>
+  </div>
+  <div class="modal-footer">
+  </div>
+</div>
+
+
+<script src="/static/js/ko.hue-bindings.js"></script>
+<link rel="stylesheet" href="/static/ext/css/bootstrap-datepicker.min.css" type="text/css" media="screen" title="no title" charset="utf-8" />
+<link rel="stylesheet" href="/static/ext/css/bootstrap-timepicker.min.css" type="text/css" media="screen" title="no title" charset="utf-8" />
+
+<style type="text/css">
+  .datepicker {
+    z-index: 4999;
+  }
+  #param-container input[type="text"].filechooser-input.input-xlarge {
+    width: 450px;
+  }
+  #param-container .control-group {
+    float: left;
+  }
+  #param-container .btn-group {
+    margin-left: 10px;
+  }
+}
+</style>
+
+<script src="/static/ext/js/moment.min.js" type="text/javascript" charset="utf-8"></script>
+<script src="/static/ext/js/bootstrap-datepicker.min.js" type="text/javascript" charset="utf-8"></script>
+<script src="/static/ext/js/bootstrap-timepicker.min.js" type="text/javascript" charset="utf-8"></script>
+
 <script type="text/javascript">
   $('.submit-form .filechooser-input').each(function(){
       $(this).after(getFileBrowseButton($(this), true, null, true));
-- 
1.7.9.5

