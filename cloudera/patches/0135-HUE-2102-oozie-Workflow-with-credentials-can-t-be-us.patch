From b950954bab1eea5e2709eacfdb3c78051fff841f Mon Sep 17 00:00:00 2001
From: Romain Rigaux <romain@cloudera.com>
Date: Tue, 9 Dec 2014 15:35:09 -0800
Subject: [PATCH 0135/1173] HUE-2102 [oozie] Workflow with credentials can't
 be used with Coordinator (cherry picked from
 commit 0d8fd54490568db56e6a4df278e62ccace7ad163)

---
 desktop/libs/liboozie/src/liboozie/submittion.py |    4 ++++
 1 file changed, 4 insertions(+)

diff --git a/desktop/libs/liboozie/src/liboozie/submittion.py b/desktop/libs/liboozie/src/liboozie/submittion.py
index 78d411a..96ac391 100644
--- a/desktop/libs/liboozie/src/liboozie/submittion.py
+++ b/desktop/libs/liboozie/src/liboozie/submittion.py
@@ -141,6 +141,10 @@ class Submission(object):
       LOG.exception(msg)
       raise PopupException(message=msg, detail=str(ex))
 
+    if self.api.security_enabled:
+      jt_address = cluster.get_cluster_addr_for_job_submission()
+      self._update_properties(jt_address) # Needed for coordinator deploying workflows
+
     oozie_xml = self.job.to_xml(self.properties)
     self._do_as(self.user.username , self._copy_files, deployment_dir, oozie_xml)
 
-- 
1.7.9.5

