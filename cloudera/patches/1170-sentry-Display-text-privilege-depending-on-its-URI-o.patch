From 7fd87d2e3063c1b04088dc663ce1b63b9bd19f07 Mon Sep 17 00:00:00 2001
From: Romain Rigaux <romain@cloudera.com>
Date: Fri, 1 May 2015 17:53:08 -0700
Subject: [PATCH 1170/1173] [sentry] Display text privilege depending on its
 URI or DB type

---
 apps/security/src/security/templates/hive.mako |    8 ++++----
 1 file changed, 4 insertions(+), 4 deletions(-)

diff --git a/apps/security/src/security/templates/hive.mako b/apps/security/src/security/templates/hive.mako
index 7892ebc..779c97b 100644
--- a/apps/security/src/security/templates/hive.mako
+++ b/apps/security/src/security/templates/hive.mako
@@ -96,9 +96,9 @@ ${ layout.menubar(section='hive') }
       <i class="fa fa-unlock muted" title="${ _('With grant option') }"></i>
     <!-- /ko -->
     <br/>
-    server=<span data-bind="text: serverName"></span>
 
-    <!-- ko ifnot: URI -->
+    <!-- ko if: privilegeType() == 'db' -->
+      server=<span data-bind="text: serverName"></span>
       <span data-bind="visible: dbName">
         <i class="fa fa-long-arrow-right"></i> db=<a data-bind="attr: { href: '/metastore/tables/' + dbName() }" target="_blank"><span data-bind="text: dbName"></span></a>
       </span>
@@ -107,8 +107,8 @@ ${ layout.menubar(section='hive') }
       </span>
     <!-- /ko -->
 
-    <!-- ko if: URI -->
-      <i class="fa fa-long-arrow-right"></i> <a data-bind="attr: { href: '/filebrowser/view/' + URI().split('/')[3] }" target="_blank"><span data-bind="text: URI"></span></a>
+    <!-- ko if: privilegeType() == 'uri' -->
+      <i class="fa fa-file-o"></i> <i class="fa fa-long-arrow-right"></i> <a data-bind="attr: { href: '/filebrowser/view/' + URI().split('/')[3] }" target="_blank"><span data-bind="text: URI"></span></a>
     <!-- /ko -->
 
     <i class="fa fa-long-arrow-right"></i> action=<span data-bind="text: action"></span>
-- 
1.7.9.5

