From b6ce25031579fb7cf01ba51aba03264b57bf87ff Mon Sep 17 00:00:00 2001
From: Enrico Berti <hello@enricoberti.com>
Date: Sun, 15 Mar 2015 17:59:07 -0500
Subject: [PATCH 1082/1173] [oozie] Restyled workflow editor page

---
 .../oozie/templates/editor2/common_workflow.mako   |    2 +-
 .../oozie/templates/editor2/workflow_editor.mako   |  128 ++++++++++----------
 2 files changed, 67 insertions(+), 63 deletions(-)

diff --git a/apps/oozie/src/oozie/templates/editor2/common_workflow.mako b/apps/oozie/src/oozie/templates/editor2/common_workflow.mako
index ea9bfa1..a3cce65 100644
--- a/apps/oozie/src/oozie/templates/editor2/common_workflow.mako
+++ b/apps/oozie/src/oozie/templates/editor2/common_workflow.mako
@@ -45,7 +45,7 @@
 
 <script type="text/html" id="column-template">
   <div data-bind="css: klass()" style="min-height: 50px !important;">
-    <div data-bind="template: { name: 'row-template', data: oozieStartRow }, style:{'margin-top' : (typeof $root.workflow.properties.imported != 'undefined' && $root.workflow.properties.imported()) || typeof $root.isViewer != 'undefined' ? '0': '50px'}"></div>
+    <div data-bind="template: { name: 'row-template', data: oozieStartRow }" style="margin-top: 0"></div>
     <div class="container-fluid" data-bind="visible: $root.isEditing() && oozieRows().length > 0">
       <div class="row-fluid">
         <div data-bind="visible: enableOozieDropOnBefore, css: {'span4 offset4': true, 'drop-target': true, 'drop-target-dragging': $root.isDragging(), 'is-editing': $root.isEditing}, droppable: {enabled: $root.isEditing, onDrop: function(x, y){ var _w = $root.addDraggedWidget($data, true); widgetDraggedAdditionalHandler(_w); } }"></div>
diff --git a/apps/oozie/src/oozie/templates/editor2/workflow_editor.mako b/apps/oozie/src/oozie/templates/editor2/workflow_editor.mako
index c56304d..bda8435 100644
--- a/apps/oozie/src/oozie/templates/editor2/workflow_editor.mako
+++ b/apps/oozie/src/oozie/templates/editor2/workflow_editor.mako
@@ -24,7 +24,63 @@ from django.utils.translation import ugettext as _
 <%namespace name="layout" file="../navigation-bar.mako" />
 
 ${ commonheader(_("Workflow Editor"), "Oozie", user, "40px") | n,unicode }
-${ layout.menubar(section='workflows', is_editor=True) }
+<div id="editor">
+
+<%def name="buttons()">
+  <div class="pull-right" style="padding-right: 10px">
+
+    <div data-bind="visible: workflow.isDirty() || workflow.id() == null" class="pull-left muted" style="padding-top: 12px; padding-right: 8px">
+      ${ _('Unsaved') }
+    </div>
+
+    <a title="${ _('Edit') }" rel="tooltip" data-placement="bottom" data-bind="click: toggleEditing, css: {'btn': true, 'btn-inverse': isEditing}, visible: canEdit">
+      <i class="fa fa-fw fa-pencil"></i>
+    </a>
+
+    &nbsp;&nbsp;&nbsp;
+
+    <a title="${ _('Submit') }" rel="tooltip" data-placement="bottom" data-bind="click: showSubmitPopup, css: {'btn': true, 'disabled': workflow.isDirty()}, visible: workflow.id() != null">
+      <i class="fa fa-fw fa-play"></i>
+    </a>
+    <a title="${ _('Schedule') }" rel="tooltip" data-placement="bottom" data-bind="click: schedule, css: {'btn': true, 'disabled': workflow.isDirty()}, visible: workflow.id() != null">
+      <i class="fa fa-fw fa-calendar"></i>
+    </a>
+
+    &nbsp;&nbsp;&nbsp;
+
+    <a title="${ _('Settings') }" rel="tooltip" data-placement="bottom" data-toggle="modal" data-target="#settingsModal" data-bind="css: {'btn': true}, visible: canEdit">
+      <i class="fa fa-fw fa-cog"></i>
+    </a>
+
+    <a title="${ _('Workspace') }" target="_blank" rel="tooltip" data-placement="right"
+        data-original-title="${ _('Go upload additional files and libraries to the deployment directory on HDFS') }"
+        data-bind="css: {'btn': true}, attr: { href: '/filebrowser/view' + $root.workflow.properties.deployment_dir() }">
+      <i class="fa fa-fw fa-folder-open"></i>
+    </a>
+
+    &nbsp;&nbsp;&nbsp;
+
+    <a title="${ _('Save') }" rel="tooltip" data-placement="bottom" data-loading-text="${ _("Saving...") }" data-bind="click: $root.save, css: {'btn': true, 'disabled': $root.isSaving()}, visible: canEdit">
+      <i class="fa fa-fw fa-save"></i>
+    </a>
+
+    <a class="share-link btn" rel="tooltip" data-placement="bottom" data-bind="click: openShareModal,
+        attr: {'data-original-title': '${ _("Share") } ' + name},
+        css: {'isShared': isShared(), 'btn': true},
+        visible: workflow.id() != null && canEdit()">
+      <i class="fa fa-users"></i>
+    </a>
+
+    &nbsp;&nbsp;&nbsp;
+
+    <a class="btn" href="${ url('oozie:new_workflow') }" title="${ _('New') }" rel="tooltip" data-placement="bottom" data-bind="css: {'btn': true}">
+      <i class="fa fa-fw fa-file-o"></i>
+    </a>
+
+  </div>
+</%def>
+
+${ layout.menubar(section='workflows', is_editor=True, pullright=buttons) }
 
 <style type="text/css">
   body {
@@ -41,7 +97,6 @@ ${ layout.menubar(section='workflows', is_editor=True) }
 </script>
 
 
-<div id="editor">
 
 <%dashboard:layout_toolbar>
   <%def name="skipLayout()"></%def>
@@ -155,73 +210,22 @@ ${ layout.menubar(section='workflows', is_editor=True) }
 </%dashboard:layout_toolbar>
 
 
-
-<div class="search-bar">
-  <div class="pull-right" style="padding-right:50px">
-
-    <span data-bind="visible: workflow.isDirty() || workflow.id() == null" class="muted">${ _('Unsaved') }&nbsp;&nbsp;&nbsp;</span>
-
-    <a title="${ _('Edit') }" rel="tooltip" data-placement="bottom" data-bind="click: toggleEditing, css: {'btn': true, 'btn-inverse': isEditing}, visible: canEdit">
-      <i class="fa fa-fw fa-pencil"></i>
-    </a>
-
-    &nbsp;&nbsp;&nbsp;
-
-    <a title="${ _('Submit') }" rel="tooltip" data-placement="bottom" data-bind="click: showSubmitPopup, css: {'btn': true, 'disabled': workflow.isDirty()}, visible: workflow.id() != null">
-      <i class="fa fa-fw fa-play"></i>
-    </a>
-    <a title="${ _('Schedule') }" rel="tooltip" data-placement="bottom" data-bind="click: schedule, css: {'btn': true, 'disabled': workflow.isDirty()}, visible: workflow.id() != null">
-      <i class="fa fa-fw fa-calendar"></i>
-    </a>
-
-    &nbsp;&nbsp;&nbsp;
-
-    <a title="${ _('Settings') }" rel="tooltip" data-placement="bottom" data-toggle="modal" data-target="#settingsModal" data-bind="css: {'btn': true}, visible: canEdit">
-      <i class="fa fa-fw fa-cog"></i>
-    </a>
-
-    <a title="${ _('Workspace') }" target="_blank" rel="tooltip" data-placement="right"
-        data-original-title="${ _('Go upload additional files and libraries to the deployment directory on HDFS') }"
-        data-bind="css: {'btn': true}, attr: { href: '/filebrowser/view' + $root.workflow.properties.deployment_dir() }">
-      <i class="fa fa-fw fa-folder-open"></i>
-    </a>
-
-    &nbsp;&nbsp;&nbsp;
-
-    <a title="${ _('Save') }" rel="tooltip" data-placement="bottom" data-loading-text="${ _("Saving...") }" data-bind="click: $root.save, css: {'btn': true, 'disabled': $root.isSaving()}, visible: canEdit">
-      <i class="fa fa-fw fa-save"></i>
-    </a>
-
-    <a class="share-link btn" rel="tooltip" data-placement="bottom" data-bind="click: openShareModal,
-        attr: {'data-original-title': '${ _("Share") } ' + name},
-        css: {'isShared': isShared(), 'btn': true},
-        visible: workflow.id() != null && canEdit()">
-      <i class="fa fa-users"></i>
-    </a>
-
-    &nbsp;&nbsp;&nbsp;
-
-    <a class="btn" href="${ url('oozie:new_workflow') }" title="${ _('New') }" rel="tooltip" data-placement="bottom" data-bind="css: {'btn': true}">
-      <i class="fa fa-fw fa-file-o"></i>
-    </a>
-
-    <a class="btn" href="${ url('oozie:list_editor_workflows') }" title="${ _('Workflows') }" rel="tooltip" data-placement="bottom" data-bind="css: {'btn': true}">
-      <i class="fa fa-fw fa-tags"></i>
-    </a>
-  </div>
-
-
-  <form class="form-search" style="max-height: 26px; overflow-y: auto;">
-    <div class="inline object-name">
+  <div class="container-fluid">
+  <div class="row-fluid">
+    <div class="span12" data-bind="style:{'margin-top' : $root.isEditing() ? '120px': '50px'}">
+    <div class="object-name" style="text-align: center">
       <span data-bind="editable: $root.workflow.name, editableOptions: {enabled: $root.isEditing(), placement: 'right'}"></span>
     </div>
-    <div class="inline object-description">
+    <div class="object-description" style="text-align: center; margin-top: 10px">
       <span data-bind="editable: $root.workflow.properties.description, editableOptions: {enabled: $root.isEditing(), placement: 'right', emptytext: '${_('Add a description...')}'}"></span>
     </div>
-  </form>
+    </div>
+  </div>
 </div>
 
 
+
+
 ${ workflow.render() }
 
 
-- 
1.7.9.5

