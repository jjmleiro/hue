From 3e128fd659890ddadb46749e74eef75e015a5f68 Mon Sep 17 00:00:00 2001
From: Enrico Berti <hello@enricoberti.com>
Date: Sun, 15 Mar 2015 17:00:12 -0500
Subject: [PATCH 1079/1173] [oozie] Add smart switching between editor and
 dashboard

---
 apps/oozie/src/oozie/templates/navigation-bar.mako |   38 ++++++++++++++++----
 1 file changed, 32 insertions(+), 6 deletions(-)

diff --git a/apps/oozie/src/oozie/templates/navigation-bar.mako b/apps/oozie/src/oozie/templates/navigation-bar.mako
index 1b95888..dfcc0e9 100644
--- a/apps/oozie/src/oozie/templates/navigation-bar.mako
+++ b/apps/oozie/src/oozie/templates/navigation-bar.mako
@@ -29,12 +29,38 @@
           <div class="nav-collapse">
             <ul class="nav">
               <li class="currentApp">
-                <a href="/${app_name}">
-                  % if dashboard:
-                    <img src="${ static('oozie/art/icon_oozie_dashboard_48.png') }" class="app-icon" />
-                  % else:
-                    <img src="${ static('oozie/art/icon_oozie_editor_48.png') }" class="app-icon" />
-                  % endif
+                <%def name="getURL(section, dashboard, is_v2)">
+                <%
+                  if dashboard:
+                    if is_v2:
+                      if section == 'coordinators':
+                        return url('oozie:list_editor_coordinators')
+                      elif section == 'bundles':
+                        return url('oozie:list_editor_bundles')
+                      else:
+                        return url('oozie:list_editor_workflows')
+                    else:
+                      if section == 'coordinators':
+                        return url('oozie:list_coordinators')
+                      elif section == 'bundles':
+                        return url('oozie:list_bundles')
+                      else:
+                        return url('oozie:list_workflows')
+                  else:
+                    if section == 'coordinators':
+                      return url('oozie:list_oozie_coordinators')
+                    elif section == 'bundles':
+                      return url('oozie:list_oozie_bundles')
+                    else:
+                      return url('oozie:list_oozie_workflows')
+                %>
+              </%def>
+
+                % if dashboard:
+                <a title="${ _('Switch to the editor') }" href="${getURL(section, dashboard, ENABLE_V2.get())}">
+                % else:
+                <a title="${ _('Switch to the dashboard') }" href="${getURL(section, dashboard, ENABLE_V2.get())}">
+                % endif
                   ${ _('Oozie Dashboard') if dashboard else _('Oozie Editor') }
                 </a>
                </li>
-- 
1.7.9.5

