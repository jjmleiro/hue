From c15002af42deae6631984a44b0e55c970adaa910 Mon Sep 17 00:00:00 2001
From: Erick Tryzelaar <erickt@cloudera.com>
Date: Mon, 23 Feb 2015 10:34:36 -0800
Subject: [PATCH 0893/1173] [spark] Fix polling the livy session status

---
 apps/spark/src/spark/models.py |    2 +-
 1 file changed, 1 insertion(+), 1 deletion(-)

diff --git a/apps/spark/src/spark/models.py b/apps/spark/src/spark/models.py
index 0490971..e76f939 100644
--- a/apps/spark/src/spark/models.py
+++ b/apps/spark/src/spark/models.py
@@ -278,7 +278,7 @@ class SparkApi():
     status = api.get_session(response['id'])
     count = 0
 
-    while status['state'] == 'starting' or count < 60:
+    while status['state'] == 'starting' and count < 60:
       status = api.get_session(response['id'])
       count += 1
       time.sleep(1)
-- 
1.7.9.5

