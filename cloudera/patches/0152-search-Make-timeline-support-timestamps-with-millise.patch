From 293f355098562fbabe5f9f1f6f77cc69c0d6b95d Mon Sep 17 00:00:00 2001
From: Romain Rigaux <romain@cloudera.com>
Date: Mon, 15 Dec 2014 16:22:46 -0800
Subject: [PATCH 0152/1173] [search] Make timeline support timestamps with
 milliseconds

---
 apps/search/src/search/api.py |    2 +-
 1 file changed, 1 insertion(+), 1 deletion(-)

diff --git a/apps/search/src/search/api.py b/apps/search/src/search/api.py
index 8e2a6ab..8648438 100644
--- a/apps/search/src/search/api.py
+++ b/apps/search/src/search/api.py
@@ -68,7 +68,7 @@ def _guess_range_facet(widget_type, solr_api, collection, facet_field, propertie
         gap = int((end - start) / SLOTS)
       if gap < 1:
         gap = 1
-    elif re.match('\d\d\d\d-\d\d-\d\dT\d\d:\d\d:\d\dZ', stat_facet['min']):
+    elif re.match('\d\d\d\d-\d\d-\d\dT\d\d:\d\d:\d\d(\.\d\d?\d?)?Z', stat_facet['min']):
       is_date = True
       stats_min = stat_facet['min']
       stats_max = stat_facet['max']
-- 
1.7.9.5

