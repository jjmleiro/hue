From f5815e22d349165d47af99604d6e16a16b7527eb Mon Sep 17 00:00:00 2001
From: Karissa McKelvey <krmckelv@gmail.com>
Date: Wed, 8 Oct 2014 13:40:03 -0700
Subject: [PATCH 0021/1173] [imapala] Example doesn't fail with already
 installed message

---
 .../commands/beeswax_install_examples.py           |   14 ++++++++++++--
 1 file changed, 12 insertions(+), 2 deletions(-)

diff --git a/apps/beeswax/src/beeswax/management/commands/beeswax_install_examples.py b/apps/beeswax/src/beeswax/management/commands/beeswax_install_examples.py
index 656df79..f009e8b 100644
--- a/apps/beeswax/src/beeswax/management/commands/beeswax_install_examples.py
+++ b/apps/beeswax/src/beeswax/management/commands/beeswax_install_examples.py
@@ -33,7 +33,7 @@ from beeswax.design import hql_query
 from beeswax.server import dbms
 from beeswax.server.dbms import get_query_server_config, QueryServerException
 from useradmin.models import install_sample_user
-
+from desktop.lib.exceptions_renderable import PopupException
 
 LOG = logging.getLogger(__name__)
 
@@ -64,7 +64,17 @@ class Command(NoArgsCommand):
     Document.objects.sync()
 
     if exception is not None:
-      raise exception
+      pretty_msg = None
+      
+      if "AlreadyExistsException" in exception.message:
+        pretty_msg = _("SQL table examples already installed.")
+      if "Permission denied" in exception.message:
+        pretty_msg = _("Permission denied. Please check with your system administrator.")
+
+      if pretty_msg is not None:
+        raise PopupException(pretty_msg)
+      else: 
+        raise exception
 
   def _install_tables(self, django_user, app_name):
     data_dir = beeswax.conf.LOCAL_EXAMPLES_DATA_DIR.get()
-- 
1.7.9.5

