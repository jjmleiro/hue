From 84aabdf6d36bd49564d94ea39dcaa29a685f76af Mon Sep 17 00:00:00 2001
From: krish <krish@cloudera.com>
Date: Tue, 16 Dec 2014 16:59:32 -0800
Subject: [PATCH 0160/1173] HUE-2481 [oozie] handle escaped = in jo.properties
 when submitting from hdfs

---
 desktop/libs/liboozie/src/liboozie/submittion.py |    5 +++--
 1 file changed, 3 insertions(+), 2 deletions(-)

diff --git a/desktop/libs/liboozie/src/liboozie/submittion.py b/desktop/libs/liboozie/src/liboozie/submittion.py
index 96ac391..738af48 100644
--- a/desktop/libs/liboozie/src/liboozie/submittion.py
+++ b/desktop/libs/liboozie/src/liboozie/submittion.py
@@ -18,6 +18,7 @@
 import errno
 import logging
 import os
+import re
 import time
 
 from django.utils.translation import ugettext as _
@@ -178,8 +179,8 @@ class Submission(object):
     parameters = dict([(var, '') for var in find_variables(xml, include_named=False) if not self._is_coordinator() or var not in DATASET_FREQUENCY])
 
     if properties:
-      parameters.update(dict([line.strip().split('=')
-                              for line in properties.split('\n') if not line.startswith('#') and len(line.strip().split('=')) == 2]))
+      parameters.update(dict([re.split(r'(?<!\\)=', line.strip())
+                              for line in properties.split('\n') if not line.startswith('#') and len(re.split(r'(?<!\\)=', line.strip())) == 2]))
     return parameters
 
   def _update_properties(self, jobtracker_addr, deployment_dir=None):
-- 
1.7.9.5

