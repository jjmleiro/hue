From 6661656570d71434040e011378767d20d8aef31b Mon Sep 17 00:00:00 2001
From: Romain Rigaux <romain@cloudera.com>
Date: Wed, 19 Nov 2014 15:39:08 -0800
Subject: [PATCH 0297/1173] [oozie] Add link to HDFS workspace

---
 .../templates/editor/gen2/workflow-pig.xml.mako    |    4 ++--
 .../oozie/templates/editor/workflow_editor.mako    |    8 +++++---
 2 files changed, 7 insertions(+), 5 deletions(-)

diff --git a/apps/oozie/src/oozie/templates/editor/gen2/workflow-pig.xml.mako b/apps/oozie/src/oozie/templates/editor/gen2/workflow-pig.xml.mako
index 8a70a15..bf0078a 100644
--- a/apps/oozie/src/oozie/templates/editor/gen2/workflow-pig.xml.mako
+++ b/apps/oozie/src/oozie/templates/editor/gen2/workflow-pig.xml.mako
@@ -39,7 +39,7 @@
 
             ${ common.distributed_cache(node['properties']['files'], node['properties']['archives']) }
         </pig>
-        <ok to="${ node['children'][0]['to'] }"/>
-        <error to="${ node['children'][1]['error'] }"/>
+        <ok to="${ node_mapping[node['children'][0]['to']].name }"/>
+        <error to="${ node_mapping[node['children'][1]['error']].name }"/>
         ${ common.sla(node) }
     </action>
diff --git a/apps/oozie/src/oozie/templates/editor/workflow_editor.mako b/apps/oozie/src/oozie/templates/editor/workflow_editor.mako
index 213e1fe..d087ee0 100644
--- a/apps/oozie/src/oozie/templates/editor/workflow_editor.mako
+++ b/apps/oozie/src/oozie/templates/editor/workflow_editor.mako
@@ -145,12 +145,14 @@ ${ commonheader(_("Workflow Editor"), "Oozie", user) | n,unicode }
     </a>
     &nbsp;&nbsp;&nbsp;
     % if user.is_superuser:
-      <button type="button" title="${ _('Workspace') }" rel="tooltip" data-placement="bottom" data-toggle="modal" data-target="#settingsDemiModal" data-bind="css: {'btn': true}">
-        <i class="fa fa-folder-open"></i>
-      </button>
       <button type="button" title="${ _('Settings') }" rel="tooltip" data-placement="bottom" data-toggle="modal" data-target="#settingsDemiModal" data-bind="css: {'btn': true}">
         <i class="fa fa-cog"></i>
       </button>
+      <a title="${ _('Workspace') }" target="_blank" rel="tooltip" data-placement="right"
+          data-original-title="${ _('Go upload additional files and libraries to the deployment directory on HDFS') }"
+          data-bind="css: {'btn': true}, attr: {href: '/filebrowser/view' + $root.workflow.properties.deployment_dir() }">
+        <i class="fa fa-folder-open"></i>
+      </a>      
       &nbsp;&nbsp;&nbsp;
       <button type="button" title="${ _('Save') }" rel="tooltip" data-placement="bottom" data-loading-text="${ _("Saving...") }" data-bind="click: $root.save, css: {'btn': true}">
         <i class="fa fa-save"></i>
-- 
1.7.9.5

